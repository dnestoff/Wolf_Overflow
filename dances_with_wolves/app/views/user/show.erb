<div class="container">
  <h1><%= @user.username %></h1>
  <h2>My Questions</h2>
  <table class="user-questions-table">
    <tr>
      <th>Question</th>
      <th>Answers</th>
      <th>Vote Count</th>
    </tr>
    <% if !@user.questions.first.nil? %>
      <% @user.questions.order(:created_at).last(5).each do |question| %>
      <tr>
        <td><a href="/questions/<%= "#{question.id}" %>"><%= question.title %></a></td>
        <td><%= question.answers.count %></td>
        <td><%= Vote.vote_count(question) %></td>
      </tr>
      <% end %>
      <p><a href="/users/<%= "#{@user.id}" %>/questions">All my questions</a></p>
    <% end %>
  <br>
  <h2>My Answers</h2>
  <% if !@user.best_answers.nil? %>
    <h3>Best answers</h3>
    <table class="user-best-answers-table">
      <tr>
        <th>Answer</th>
        <th>Vote Count</th>
      </tr>
      <% @user.best_answers.each do |best_answer| %>
      <tr>
        <td><%= best_answer.text %></td>
        <td><%= Vote.vote_count(best_answer) %></td>
      </tr>
      <% end %>
    </table>
  <% end %>
  <h3>Recent answers</h3>
  <table class="user-recent-answers-table">
    <tr>
      <th>Answer</th>
      <th>Vote Count</th>
    </tr>
    <% @user.answers.order(:created_at).last(5).each do |answer| %>
    <tr>
      <td><a href="/questions/<%="#{answer.question_id}"%>"><%= answer.text %></a></td>
      <td><%= Vote.vote_count(answer) %></td>
    </tr>
    <% end %>
  </table>
  <p><a href="/users/<%= "#{@user.id}" %>/answers">All my answers</a></p>
  <br>
  <h2>My Comments</h2>
  <table class="user-comments-table">
    <tr>
      <th>Comment</th>
      <th>Vote Count</th>
    </tr>
    <% @user.comments.order(:created_at).last(5).each do |comment| %>
    <tr>
      <% if comment.commentable_type == "Answer" %>
        <td><a href="/questions/<%="#{Answer.find(comment.commentable_id)}"%>"><%= comment.text %></a></td>
      <% elsif comment.commentable_type == "Question" %>
        <td><a href="/questions/<%="#{comment.commentable_id}"%>"><%= comment.text %></a></td>
      <td><%= Vote.vote_count(comment) %></td>
      <% end %>
    </tr>
    <% end %>
  </table>


